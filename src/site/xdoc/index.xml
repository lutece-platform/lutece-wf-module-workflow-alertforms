<?xml version="1.0" encoding="UTF-8"?>
<document>
	<properties>
		<title>Module workflow alertforms</title>
	</properties>
	<body>
		<section name="Module workflow alertforms">
			<subsection name="Introduction">
				<p>This workflow module provides an alerting mechanism for form responses. 
				It creates and stores alert entries based on a date extracted (or computed) from a form response and, when the deadline is reached, the module change automatically the state of the form response.
				The alert is displayed in the history of the form reponse.
				</p>
			</subsection>
			<subsection name="Configuration">
				<p>The task configuration defines the form, the retrieval strategy that yields the reference date, the number of days to add or subtract and the target state to apply after the deadline.</p>
				<p>When TaskAlert runs for a form reponse, it computes the reference date (using a retrieval type) and inserts an Alert row if none exists for that form response.</p>
				<p>A periodic daemon scans active alerts, compares reference_date + configured number of days with the current time, then triggers the action (state transition) and marks the alert executed.</p>
				<p>Another daemon performs cleanup of obsolete alerts. </p>
				<p>The retrieval system is extensible: new <code>IRetrievalType</code> implementations can be registered as CDI beans.</p>
			</subsection>
			<subsection name="Usage">
				<p>To use the module, install it into your Lutece instance. Configure the task in the workflow administration UI: choose the form, the retrieval type, the number of days, and the target state.</p>
			</subsection>
		</section>
	</body>
</document>